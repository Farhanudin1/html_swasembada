<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dashboard Pemantauan</title>

    <!-- Google AdSense -->
    <script async
        src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6142064154189877"
        crossorigin="anonymous"></script>
    <meta name="google-adsense-account" content="ca-pub-6142064154189877">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        .chartBox {
            padding: 20px;
            border-radius: 20px;
            border: solid 3px rgba(0, 206, 21, 0.5);
            background: rgba(201, 255, 200, 0.5);
        }

        html, body {
            height: 100%;
            margin: 0;
            background: url('https://media.gettyimages.com/id/1410325116/photo/drone-view-of-vast-onion-field-at-dusk.jpg') no-repeat center center fixed;
            background-size: cover;
            font-family: Arial, sans-serif;
            color: #2c3e50;
        }

        .container {
            min-height: 100vh;
            padding: 20px;
        }

        h1 {
            font-weight: bold;
            color: #27ae60;
            text-shadow: 1px 1px 2px rgba(0,0,0,.1);
        }

        .card {
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,.1);
            margin-bottom: 20px;
        }

        .card-header {
            background-color: #27ae60;
            color: white;
            font-weight: bold;
        }

        .card-body {
            background-color: rgba(201,254,212,.3);
        }

        table th {
            background-color: #27ae60;
            color: white;
            text-align: center;
        }

        table td {
            background-color: rgba(255,255,255,.6);
            text-align: center;
        }

        video {
            max-width: 100%;
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,.2);
        }

        .btn {
            background-color: #27ae60;
            color: white;
            font-weight: bold;
        }

        .btn:hover {
            background-color: #1e8449;
        }

        .card-message {
            background-color: rgba(140,253,187,.1);
        }

        @media (max-width: 768px) {
            .col-md-6 {
                margin-bottom: 20px;
            }
        }
    </style>
</head>

<body>
<div class="container my-4">

    <h1 class="text-center mb-4">Dashboard Pemantauan</h1>

    <!-- ADSENSE TOP -->
    <div class="text-center my-3">
        <ins class="adsbygoogle"
     style="display:block"
     data-ad-format="fluid"
     data-ad-layout-key="+3n+pa-24-6b+yp"
     data-ad-client="ca-pub-6142064154189877"
     data-ad-slot="7983479871"></ins>
             data-full-width-responsive="true"></ins>
    </div>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>

    <!-- Kamera -->
    <div class="card mb-4">
        <div class="card-header">Pemantauan Kamera (Deep Learning)</div>
        <div class="card-body text-center">
            <video id="camera-feed" width="640" height="480" autoplay></video>
            <p class="mt-3">Prediksi: <span id="prediction">-</span></p>
        </div>
    </div>

    <!-- Grafik -->
    <div class="row">
        <div class="col-md-6 chartBox">
            <canvas id="lineChart"></canvas>
        </div>
        <div class="col-md-6 chartBox">
            <canvas id="barChart"></canvas>
        </div>
    </div>

    <!-- ADSENSE MIDDLE -->
    <div class="text-center my-4">
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-6142064154189877"
             data-ad-slot="1234567890"
             data-ad-format="rectangle"></ins>
    </div>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>

    <!-- Tabel Data -->
    <div class="card mt-4">
        <div class="card-header">Tabel Data Pemantauan</div>
        <div class="card-body">
            <table class="table table-bordered">
                <tr><th>Nitrogen</th><td id="nitrogen">-</td></tr>
                <tr><th>Fosfor</th><td id="phosphorus">-</td></tr>
                <tr><th>Kalium</th><td id="potassium">-</td></tr>
                <tr><th>pH</th><td id="ph">-</td></tr>
                <tr><th>Konduktivitas</th><td id="conductivity">-</td></tr>
                <tr><th>Suhu</th><td id="temperature">-</td></tr>
                <tr><th>Kelembaban</th><td id="humidity">-</td></tr>
            </table>
        </div>
    </div>

    <!-- Filter Tanggal -->
    <div class="card mt-4">
        <div class="card-header">Pengaturan Tanggal</div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-5">
                    <input type="date" class="form-control">
                </div>
                <div class="col-md-5">
                    <input type="date" class="form-control">
                </div>
                <div class="col-md-2">
                    <button class="btn w-100">Filter</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Pesan -->
    <div class="card mt-4 card-message">
        <div class="card-header">Pesan untuk Petani</div>
        <div class="card-body">
            <p id="incomingMessage">Belum ada pesan.</p>
        </div>
    </div>

</div>

<script>
    navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => document.getElementById('camera-feed').srcObject = stream);

    new Chart(lineChart, {
        type: 'line',
        data: {
            labels: ["Jan","Feb","Mar","Apr","Mei","Jun"],
            datasets: [{ label: "Kelembaban", data: [65,59,80,81,56,55], borderColor: "green" }]
        }
    });

    new Chart(barChart, {
        type: 'bar',
        data: {
            labels: ["N","P","K","pH","EC","Suhu","RH"],
            datasets: [{ label: "Parameter", data: [12,19,3,5,2,3,7] }]
        }
    });

    setInterval(() => {
        nitrogen.innerText = Math.random().toFixed(2);
        phosphorus.innerText = Math.random().toFixed(2);
        potassium.innerText = Math.random().toFixed(2);
        ph.innerText = (Math.random()*14).toFixed(2);
        conductivity.innerText = (Math.random()*100).toFixed(2);
        temperature.innerText = (20+Math.random()*10).toFixed(2);
        humidity.innerText = (50+Math.random()*50).toFixed(2);
    }, 2000);
</script>

</body>
</html>
